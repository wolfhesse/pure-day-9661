{"ts":1352170548099,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"var express = require('express');\nvar app = module.exports = express.createServer();\n\napp.configure(function(){\n  app.use(express.bodyParser());\n  app.use(express.methodOverride());\n  app.use(app.router);\n  app.use(express.static(__dirname + '/public'));\n});\n\napp.configure('development', function(){\n  app.use(express.errorHandler({ dumpExceptions: true, showStack: true }));\n});\n\napp.configure('production', function(){\n  app.use(express.errorHandler());\n});\n\nvar port = process.env.PORT || 3000;\napp.listen(port, function() {\n  console.log(\"Listening on \" + port);\n});\n\nvar io = require('socket.io').listen(app);\n\nvar usernames = {};\n\nio.sockets.on('connection', function (socket) {\n\n\t// when the client emits 'sendchat', this listens and executes\n\tsocket.on('sendchat', function (data) {\n\t\t// we tell the client to execute 'updatechat' with 2 parameters\n\t\tio.sockets.emit('updatechat', socket.username, data);\n\t});\n\n\t// when the client emits 'adduser', this listens and executes\n\tsocket.on('adduser', function(username){\n\t\t// we store the username in the socket session for this client\n\t\tsocket.username = username;\n\t\t// add the client's username to the global list\n\t\tusernames[username] = username;\n\t\t// echo to client they've connected\n\t\tsocket.emit('updatechat', 'SERVER', 'you have connected');\n\t\t// echo globally (all clients) that a person has connected\n\t\tsocket.broadcast.emit('updatechat', 'SERVER', username + ' has connected');\n\t\t// update the list of users in chat, client-side\n\t\tio.sockets.emit('updateusers', usernames);\n\t});\n\n\t// when the user disconnects.. perform this\n\tsocket.on('disconnect', function(){\n\t\t// remove the username from global usernames list\n\t\tdelete usernames[socket.username];\n\t\t// update list of users in chat, client-side\n\t\tio.sockets.emit('updateusers', usernames);\n\t\t// echo globally that this client has left\n\t\tsocket.broadcast.emit('updatechat', 'SERVER', socket.username + ' has disconnected');\n\t});\n});\n\napp.get('/', function (req, res) {\n  res.sendfile(__dirname + '/index.html');\n});"]],"start1":0,"start2":0,"length1":0,"length2":2031}]],"length":2031}
{"ts":1372335530063,"patch":[[{"diffs":[[0,"ame + '/"],[1,"public/"],[0,"index.ht"]],"start1":2006,"start2":2006,"length1":16,"length2":23}]],"length":2038,"saved":false}
{"contributors":[],"silentsave":true,"ts":1372336987737,"patch":[[{"diffs":[[0,"nfigure(function"],[1," "],[0,"()"],[1," "],[0,"{\n"],[1,"  "],[0,"  app.use(expres"]],"start1":92,"start2":92,"length1":36,"length2":40},{"diffs":[[0,"yParser());\n"],[1,"  "],[0,"  app.use(ex"]],"start1":137,"start2":137,"length1":24,"length2":26},{"diffs":[[0,"ide());\n"],[1,"  "],[0,"  app.us"]],"start1":180,"start2":180,"length1":16,"length2":18},{"diffs":[[0,"outer);\n"],[1,"  "],[0,"  app.us"]],"start1":205,"start2":205,"length1":16,"length2":18},{"diffs":[[0,"pment', function"],[1," "],[0,"()"],[1," "],[0,"{\n"],[1,"  "],[0,"  app.use(expres"]],"start1":291,"start2":291,"length1":36,"length2":40},{"diffs":[[0,"function"],[1," "],[0,"()"],[1," "],[0,"{\n"],[1,"  "],[0,"  app.us"]],"start1":424,"start2":424,"length1":20,"length2":24},{"diffs":[[0," || "],[-1,"3"],[1,"5"],[0,"000;"]],"start1":507,"start2":507,"length1":9,"length2":9},{"diffs":[[0,"function"],[1," "],[0,"() {\n"],[1,"  "],[0,"  consol"]],"start1":534,"start2":534,"length1":21,"length2":24},{"diffs":[[0,"ket) {\n\n"],[-1,"\t"],[1,"    "],[0,"// when "]],"start1":700,"start2":700,"length1":17,"length2":20},{"diffs":[[0,"ns and executes\n"],[-1,"\t"],[1,"    "],[0,"socket.on('sendc"]],"start1":759,"start2":759,"length1":33,"length2":36},{"diffs":[[0,"data) {\n"],[-1,"\t\t"],[1,"        "],[0,"// we te"]],"start1":811,"start2":811,"length1":18,"length2":24},{"diffs":[[0,"ameters\n"],[-1,"\t\t"],[1,"        "],[0,"io.socke"]],"start1":883,"start2":883,"length1":18,"length2":24},{"diffs":[[0," data);\n"],[-1,"\t"],[1,"    "],[0,"});\n\n"],[-1,"\t"],[1,"    "],[0,"// when "]],"start1":945,"start2":945,"length1":23,"length2":29},{"diffs":[[0,"xecutes\n"],[-1,"\t"],[1,"    "],[0,"socket.o"]],"start1":1020,"start2":1020,"length1":17,"length2":20},{"diffs":[[0,"function"],[1," "],[0,"(usernam"]],"start1":1053,"start2":1053,"length1":16,"length2":17},{"diffs":[[0,"sername)"],[1," "],[0,"{\n"],[-1,"\t\t"],[1,"        "],[0,"// we st"]],"start1":1064,"start2":1064,"length1":20,"length2":27},{"diffs":[[0," client\n"],[-1,"\t\t"],[1,"        "],[0,"socket.u"]],"start1":1138,"start2":1138,"length1":18,"length2":24},{"diffs":[[0,"ername;\n"],[-1,"\t\t"],[1,"        "],[0,"// add t"]],"start1":1174,"start2":1174,"length1":18,"length2":24},{"diffs":[[0,"al list\n"],[-1,"\t\t"],[1,"        "],[0,"username"]],"start1":1230,"start2":1230,"length1":18,"length2":24},{"diffs":[[0,"ername;\n"],[-1,"\t\t"],[1,"        "],[0,"// echo "]],"start1":1270,"start2":1270,"length1":18,"length2":24},{"diffs":[[0,"e connected\n"],[-1,"\t\t"],[1,"        "],[0,"socket.emit("]],"start1":1310,"start2":1310,"length1":26,"length2":32},{"diffs":[[0,"cted');\n"],[-1,"\t\t"],[1,"        "],[0,"// echo "]],"start1":1381,"start2":1381,"length1":18,"length2":24},{"diffs":[[0,"nnected\n"],[-1,"\t\t"],[1,"        "],[0,"socket.b"]],"start1":1448,"start2":1448,"length1":18,"length2":24},{"diffs":[[0,"cted');\n"],[-1,"\t\t"],[1,"        "],[0,"// updat"]],"start1":1532,"start2":1532,"length1":18,"length2":24},{"diffs":[[0,"at, client-side\n"],[-1,"\t\t"],[1,"        "],[0,"io.sockets.emit("]],"start1":1581,"start2":1581,"length1":34,"length2":40},{"diffs":[[0,"s);\n"],[-1,"\t"],[1,"    "],[0,"});\n\n"],[-1,"\t"],[1,"    "],[0,"// w"]],"start1":1644,"start2":1644,"length1":15,"length2":21},{"diffs":[[0,"rm this\n"],[-1,"\t"],[1,"    "],[0,"socket.o"]],"start1":1697,"start2":1697,"length1":17,"length2":20},{"diffs":[[0,"tion"],[1," "],[0,"()"],[1," "],[0,"{\n"],[-1,"\t\t"],[1,"        "],[0,"// r"]],"start1":1737,"start2":1737,"length1":14,"length2":22},{"diffs":[[0,"es list\n"],[-1,"\t\t"],[1,"        "],[0,"delete u"]],"start1":1797,"start2":1797,"length1":18,"length2":24},{"diffs":[[0,"rname];\n"],[-1,"\t\t"],[1,"        "],[0,"// updat"]],"start1":1840,"start2":1840,"length1":18,"length2":24},{"diffs":[[0,"nt-side\n"],[-1,"\t\t"],[1,"        "],[0,"io.socke"]],"start1":1893,"start2":1893,"length1":18,"length2":24},{"diffs":[[0,"names);\n"],[-1,"\t\t"],[1,"        "],[0,"// echo "]],"start1":1944,"start2":1944,"length1":18,"length2":24},{"diffs":[[0,"eft\n"],[-1,"\t\t"],[1,"        "],[0,"sock"]],"start1":1999,"start2":1999,"length1":10,"length2":16},{"diffs":[[0,"');\n"],[-1,"\t"],[1,"    "],[0,"});\n"]],"start1":2093,"start2":2093,"length1":9,"length2":12},{"diffs":[[0,"{\n  "],[-1,"res.sendfile(__dirname + '/public"],[1,"  console.log(\"dirname is \" + __dirname);\n//    res.sendfile(__dirname + 'index.html');\n    res.redirect('"],[0,"/ind"]],"start1":2143,"start2":2143,"length1":41,"length2":114},{"diffs":[[0,".html');\n});"],[1,"\n"]],"start1":2259,"start2":2259,"length1":12,"length2":13}]],"length":2272,"saved":false}
